import{K as w,m as N,r as i,j as s,L as P}from"./app-CTsPbqCq.js";import{M as k}from"./Modal-Dn-T28NW.js";const I=({open:u,onClose:p})=>{const{errors:f,nouid:x}=w().props,{data:a,setData:c,post:h,processing:d}=N({pin:"",nouid:x??""}),[l,g]=i.useState("password"),n=i.useRef(Array(6).fill(null));i.useEffect(()=>{const e=window.location.pathname.split("/")[1];c("nouid",e)},[c]),i.useEffect(()=>{var r;u&&n.current[0]&&((r=n.current[0])==null||r.focus())},[u]);const y=r=>{r.preventDefault(),/^\d{6}$/.test(a.pin)&&h(`/${a.nouid}/verify-pin`,{preserveState:!0,onSuccess:()=>{p()},onError:()=>{var e;c("pin",""),n.current[0]&&((e=n.current[0])==null||e.focus())}})},b=(r,e)=>{var m;const t=r.target.value.replace(/\D/g,""),o=a.pin.split("");o[e]=t.charAt(t.length-1)||"",c("pin",o.join("")),t&&e<5&&n.current[e+1]&&((m=n.current[e+1])==null||m.focus())},j=(r,e)=>{var t;r.key==="Backspace"&&!a.pin[e]&&e>0&&n.current[e-1]&&((t=n.current[e-1])==null||t.focus())},v=r=>{var t;r.preventDefault();const e=r.clipboardData.getData("text/plain").replace(/\D/g,"").slice(0,6);if(e.length>0){c("pin",e);const o=Math.min(e.length-1,5);n.current[o]&&((t=n.current[o])==null||t.focus())}};return s.jsx(k,{isOpen:u,onClose:p,children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(P,{title:"Masukkan PIN"}),s.jsxs("div",{className:"w-full max-w-md space-y-8",children:[s.jsx("div",{children:s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Masukkan PIN"})}),f.pin&&s.jsx("div",{className:"mb-4 text-center text-sm text-red-500",children:f.pin}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[s.jsx("div",{className:"flex justify-center space-x-2",children:Array.from({length:6}).map((r,e)=>s.jsx("input",{ref:t=>{n.current[e]=t},type:l,inputMode:"numeric",pattern:"[0-9]",maxLength:1,required:!0,autoComplete:"off",className:"h-12 w-12 rounded-md border border-gray-300 text-center text-2xl focus:border-blue-500 focus:ring-blue-500 focus:outline-none",value:a.pin[e]||"",onChange:t=>b(t,e),onKeyDown:t=>j(t,e),onPaste:v},e))}),s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{type:"button",className:"text-sm text-gray-600 hover:text-gray-800",onClick:()=>g(l==="password"?"text":"password"),children:l==="password"?"Tampilkan PIN":"Sembunyikan PIN"})}),s.jsx("div",{className:"flex flex-col space-y-2",children:s.jsx("button",{type:"submit",disabled:d||a.pin.length!==6,className:`group relative flex w-full justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium text-white ${a.pin.length===6?"bg-blue-600 hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none":"cursor-not-allowed bg-gray-400"}`,children:d?"Memverifikasi...":"Masuk"})})]})]})]})})};export{I as default};
